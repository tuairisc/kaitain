/*
 * AdRotate Groups
 * ---------------
 * AdRotate's groups are numeric classes from .g-1 to .g-âˆž
 * It's stock CSS is awful and loaded at run time via JS. This
 * section hopefully overrides all of those stock rules.
 * 
 * Group   Location
 * ------------------
 * .g-1    Header
 * .g-2    Sidebar #1
 * .g-3    Footer
 * .g-4    Sidebar #2
 * .g-5    Sidebar #3
 * 
 * If the AdRotate Pro plugin is ever updated then this CSS will break. 
 * AdRotate injects its own CSS upon page load. I have prevented this behaviour
 * with the following alteration of its files:
 * 
 * adrotate.php:
 * -------------
 * Commented line 68:
 *     Before:
 *         add_action('wp_head', 'adrotate_custom_css');
 *     After:
 *         // add_action('wp_head', 'adrotate_custom_css');
 *
 * If this line is uncommented then AdRotate Pro will inject its own CSS on
 * load. This is a Bad Thing which will bork advert display.
 * 
 * ./library/jquery.adrotate.dyngroup.js:
 * --------------------------------------
 * Altered line 58:
 *      Before:
 *          $cont.find(".c-" + counter).fadeIn(300)
 *      After:
 *          $cont.find(".c-" + counter).show()
 * 
 * Altered line 61:
 *      Before:
 *          $cont.find(".c-" + index).fadeOut(300)
 *      After:
 *          $cont.find(".c-" + index).hide()
 * 
 * This stock behaviour causes the next advert in rotation to appear before the
 * previous one disappears. It causes a brief "stack" of one advert atop the 
 * other. It would've made sense to do the second fade as a callback to the 
 * first, but what would I know, eh? 
 * Regardless-if AdRotate Pro is updated, these changes will be wiped out. */

/* General Advert Styles */

.g {
    @extend %zero;
}

.g-1, .g-3 {
    padding: 20px 4%;
}

.sidebar-adverts {
    // Importrant: width collapses otherwise.
    width: 100%;
    @include prefix_value(display, flex);
    @include prefix(flex-direction, column);
    @include prefix(flex-wrap, nowrap);

    @include breakpoint(portrait) {
        // Spread out each of the three boxes evenly in tablet portrait mode.
        @include prefix(flex-direction, row);
        @include prefix(justify-content, space-between);
    }

    @include breakpoint(smartphone) {
        @include prefix(flex-direction, column);
    }

    > div {
        // Advert groups: .g-2, .g-4 and .g-5
        @include prefix(flex, 1);
        margin-bottom: 20px;

        @include breakpoint(portrait) {
            @include prefix(flex, 0 1 32.5%);
        }

        @include breakpoint(smartphone) {
            /* There is a bug on the iPhone in (at least) iOS 8 where the height
             * collapses to 0 the content of a column flexbox is set to anything
             * but 1/auto. */
            @include prefix(flex, 1);
        }
    }
}

.g-dyn {
    /* Dynamic adverts on rotation. AdRotate will toggle each g-dyn block in 
     * sequence, but they initially all need to be hidden. */
    display: none;
}

.tuairisc-advert {
    a {
        display: block;
        text-align: center;
    }

    img {
        // The actual advert div.
        height: auto;
        margin: 0 auto;
        max-width: 100%;
    }
}